           <html>
           <style>              
           </style>              
           <head>              
           <script>
               var  connection = new WebSocket('ws://192.168.0.101:81/', ['arduino']);
                    connection.onopen = function () {
                    connection.send('Message from Browser to ESP8266 Working!! ' + new Date());                     
                    connection.send('CLIENTE WebSocket' + new Date());
                    connection.send('Time: ' + new Date()); 
                    connection.send('W'+'1');
                };
                 connection.onerror = function (error) {
                    console.log('WebSocket Error ', error);
                };
                 connection.onmessage = function (e) {
                    console.log('Server: ', e.data);
                    var tempe=e.data;
                    var primeiro='';
                    var segundo='';
                    if(tempe.search('#RPM')>-1)
                    { 
                      primeiro=tempe.split('#RPM'); 
                      segundo=primeiro[1].split(' ');
                      rota=segundo[0];
                      document.getElementById('rota').innerHTML = rota;
                    }
                    if(tempe.search('#COMB')>-1)
                    { 
                      primeiro=tempe.split('#COMB');
                      segundo=primeiro[1].split(' ');
                      comb=segundo[0];
                      document.getElementById('comb').innerHTML = comb;
                    }
                    if(tempe.search("#A_BMP")>-1)
                    { 
                      var primeiro=tempe.split('#A_BMP');
                      var segundo=primeiro[1].split(' ');
                      alti=segundo[0];
                      document.getElementById('alti').innerHTML = alti+' m';
                    }
                    if(tempe.search('#P_BMP')>-1)
                    { 
                      var primeiro=tempe.split('#P_BMP');
                      var segundo=primeiro[1].split(' ');
                      pres=segundo[0];
                      document.getElementById('pres').innerHTML = pres+' hPa';
                    }
                    if(tempe.search('#T_BMP')>-1)
                    { 
                      var primeiro=tempe.split('#T_BMP');
                      var segundo=primeiro[1].split(' ');
                      tBMP=segundo[0];
                      document.getElementById('tBMP').innerHTML = tBMP+' &#x2103';
                    }
                    if(tempe.search('#RTC_T')>-1)
                    { 
                        var primeiro=tempe.split('#RTC_T');//esperado '#T_BMP(valor) '
                        var segundo=primeiro[1].split(' ');
                        rtcT=segundo[0];
                    }
                    if(tempe.search('#RTC_S')>-1)
                    { 
                        var primeiro=tempe.split('#RTC_S');//esperado '#T_BMP(valor) '
                        var segundo=primeiro[1].split(' ');
                        var rtcS=segundo[0];
                    }
                    if(tempe.search('#RTC_D')>-1)
                    { 
                        var primeiro=tempe.split('#RTC_D');//esperado '#T_BMP(valor) '
                        var segundo=primeiro[1].split(' ');
                        var rtcD=segundo[0];
                    }
                    if(tempe.search('#RTC_M')>-1)
                    { 
                        var primeiro=tempe.split('#RTC_M');//esperado '#T_BMP(valor) '
                        var segundo=primeiro[1].split(' ');
                        var rtcM=segundo[0];
                    }
                    if(tempe.search('#RTC_A')>-1)
                    { 
                        var primeiro=tempe.split('#RTC_A');//esperado '#T_BMP(valor) '
                        var segundo=primeiro[1].split(' ');
                        var rtcA=segundo[0];
                    }
                    if(tempe.search('#RTC_H')>-1)
                    { 
                        var primeiro=tempe.split('#RTC_H');//esperado '#T_BMP(valor) '
                        var segundo=primeiro[1].split(' ');
                        var rtcH=segundo[0];
                    }
                    if(tempe.search('#RTC_m')>-1)
                    { 
                        var primeiro=tempe.split('#RTC_m');//esperado '#T_BMP(valor) '
                        var segundo=primeiro[1].split(' ');
                        var rtcm=segundo[0];
                    }
                    var timeS = (rtcS+ ' '+rtcD+'-'+rtcM+'-'+rtcA+' '+rtcH+':'+rtcm);
                    console.log("tempo RTC "+timeS)
                    document.getElementById('time').innerHTML = timeS;	//atualiza o html

                };
                 
                 function sendRGB() {
                      var r = document.getElementById('r').value;
                      var rEd = '#'+r;
                      connection.send(rEd); 
                };
      
                 function acionaRele() {
                      var R1 = (document.getElementById('R1').checked);
                      R1 = R1*1;
                      console.log('R1 = ' + R1); 
                      var R2 = (document.getElementById('R2').checked);
                      R2 = R2*2;
                      console.log('R2 = ' + R2);
                      var R3 = (document.getElementById('R3').checked);
                      R3 = R3*4;
                      console.log('R3 = ' + R3);
                      var R4 = (document.getElementById('R4').checked);
                      R4 = R4*8;
                      console.log('R4 = ' + R4); 
                      var R5 = (document.getElementById('R5').checked);
                      R5 = R5*16;
                      console.log('R5 = ' + R5); 
                      var R6 = (document.getElementById('R6').checked);
                      R6 = R6*32;
                      console.log('R6 = ' + R6);
                      var R7 = (document.getElementById('R7').checked);
                      R7 = R7*64;
                      console.log('R7 = ' + R7);
                      var R8 = (document.getElementById('R8').checked);
                      R8 = R8*128;
                      console.log('R8 = ' + R8);
                      var estado = R1+R2+R3+R4+R5+R6+R7+R8;
                      console.log('estado = ' + estado);
                      connection.send('@'+estado);   
                };
           </script>
                    
           </head>
           <body>
           
           <div align=center style='width:50%;border:0px;margin:0 auto;'>  
            <h1 style='color:blue'>RedLine </h1>
            <b>modoTESTE</b><br><br>  
             LED Control:<br/>
           <br/>
             R: <input id='r' type='range' min='0' max='255' step='1' onchange='sendRGB();' /><br/>

           <br/><br/>
                    
             Reles<br/>
           <table style='width:50%'>
              <tr>
                  <td style='text-align: center;'>1</td>
                  <td style='text-align: center;'>2</td>
                  <td style='text-align: center;'>3</td>
                  <td style='text-align: center;'>4</td>
                  <td style='text-align: center;'>5</td>
                  <td style='text-align: center;'>6</td>
                  <td style='text-align: center;'>7</td>
                  <td style='text-align: center;'>8</td>
              </tr>
              <tr>
                  <td style='text-align: center;'><input id='R1' type='checkbox' onclick=acionaRele();></td>
                  <td style='text-align: center;'><input id='R2' type='checkbox' onclick=acionaRele();></td>
                  <td style='text-align: center;'><input id='R3' type='checkbox' onclick=acionaRele();></td>
                  <td style='text-align: center;'><input id='R4' type='checkbox' onclick=acionaRele();></td>
                  <td style='text-align: center;'><input id='R5' type='checkbox' onclick=acionaRele();></td>
                  <td style='text-align: center;'><input id='R6' type='checkbox' onclick=acionaRele();></td>
                  <td style='text-align: center;'><input id='R7' type='checkbox' onclick=acionaRele();></td>
                  <td style='text-align: center;'><input id='R8' type='checkbox' onclick=acionaRele();></td>
              </tr>
           </table>
           <br/><br/>
           <table style='width:50%'>
              <tr>
                  <td style='text-align: center;'>Temperatura</td>
                  <td style='text-align: center;'>Press&atildeo</td>
                  <td style='text-align: center;'>Altitude</td>
              </tr>
              <tr>
                  <td style='text-align: center;'><div id='tBMP'></div></td>
                  <td style='text-align: center;'><div id='pres'></div></td>
                  <td style='text-align: center;'><div id='alti'></div></td>               
              </tr>
           </table><br><br>
           <table style='width:50%'>
              <tr>
                  <td style='text-align: center;'>COMB</td>
                  <td style='text-align: center;'></td>
                  <td style='text-align: center;'></td>
                  <td style='text-align: center;'>RPM</td>
              </tr>
              <tr>
                  <td style='text-align: center;'><div  style='text-align: center;width:100px;height:60px;border:1px solid #000000;background-color:#0000FF;color:#FFFFFF;margin:0 auto' >
                                                        <h2 id='comb'></h2>
                                                  </div></td>
                  <td style='text-align: center;'><div style='width:100px;height:100px;'><br><div id='time'>time</div></div></td>
                  <td style='text-align: center;'></td>
                  <td style='text-align: center;'><div  style='text-align: center;width:100px;height:60px;border:1px solid #000000;background-color:#0000FF;color:#FFFFFF;margin:0 auto' >
                                                        <h2 id='rota'></h2>
                                                  </div></td>
              </tr>
            </table>
            </div>
        </body>
        </html>
      
